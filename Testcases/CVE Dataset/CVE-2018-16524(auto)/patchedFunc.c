#include <stdio.h>
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>

#define EINVAL 22

int prvCheckOptions(void)
{
	uint32_t *pxNetwork;
	uint8_t *pxTCPPacket = (uint8_t *)((uint8_t *) pxNetwork + 24);
    	uint8_t *pxTCPHeader = (uint8_t *)((uint8_t *) pxTCPPacket + 34);
    	//uint8_t *pucPtr = (uint8_t *)(pxTCPHeader + 20);
    	uint8_t *pucLast = (uint8_t *)( ((uint8_t *)(pxTCPHeader + 20)) + ((((*(pxTCPHeader + 12)) >> 4) - 5) << 2));
    	uint8_t xdatalength = *(uint8_t*)((char *) pxNetwork + 28);
    	
    	printf("pxNetwork = %p and pxTCPPacket = %p and pucLast = %p and xdatalength = %u \n", (void*)pxNetwork, (void*)pxTCPPacket , (void*)pucLast , xdatalength);
    	if( pucLast > pxTCPPacket + xdatalength)
    	{
        	return -EINVAL;
    	}
    	
    	return 1;
}
